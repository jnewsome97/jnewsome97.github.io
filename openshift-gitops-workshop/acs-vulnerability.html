<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vulnerability Management in Kubernetes with Red Hat Advanced Cluster Security :: OpenShift GitOps Workshop</title>
    <link rel="canonical" href="https://openshiftdemos.github.io/openshift-gitops-workshop/openshift-gitops-workshop/acs-vulnerability.html">
    <link rel="prev" href="acm-multicluster.html">
    <link rel="next" href="acs-devsecops.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="https://openshiftdemos.github.io/openshift-gitops-workshop">OpenShift GitOps Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="openshift-gitops-workshop" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">OpenShift GitOps Workshop</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="setup.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setup.html">Lab Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-getting-started.html">Logging in</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="environment.html">Operational Admin</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="environment.html">Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation.html">Installation &amp; Verification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="app-mgmt-basics.html">Application Management Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="app-storage-basics.html">Storage Basics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="machinesets.html">Machinesets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="infra-nodes.html">Infra Nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ldap-groupsync.html">LDAP Sync</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#monitoring-basics">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="template-quota-limits.html">Templates Quotas and Limits</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="networking.html">Networking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="disabling-project-self-provisioning.html">Project Self Provioning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="clusterresourcequota.html">Cluster Quotas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="taints-and-tolerations.html">Taints and Tolerations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="acm-multicluster.html">Advanced Cluster Admin</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="acm-multicluster.html">Multicluster Admin</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="acs-vulnerability.html">Advanced Cluster Security</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="acs-vulnerability.html">Vulnerability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="acs-devsecops.html">DevSecOps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#gitops.adoc">GitOps</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenShift GitOps Workshop</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">OpenShift GitOps Workshop</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OpenShift GitOps Workshop</a></li>
    <li><a href="acs-vulnerability.html">Advanced Cluster Security</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/jnewsome97/jnewsome97.github.io/edit/master/documentation/modules/ROOT/pages/acs-vulnerability.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Vulnerability Management in Kubernetes with Red Hat Advanced Cluster Security</h1>
<div class="sect1">
<h2 id="_goal_of_the_workshop"><a class="anchor" href="#_goal_of_the_workshop"></a>Goal of the Workshop</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This 30-minute session aims to get accustomed to identifying vulnerabilities in Kubernetes using the ACS dashboard. The session will discuss what makes particular vulnerabilities different and how to effectively implement controls in a Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>This workshop will focus on the log4shell export. However, multiple applications will be deployed in this use case. If you have time in the end, please explore the interface to see if you can find more security features that may help your use cases.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_red_hat_advanced_cluster_security_for_kubernetes_basics"><a class="anchor" href="#_red_hat_advanced_cluster_security_for_kubernetes_basics"></a>Red Hat Advanced Cluster Security for Kubernetes Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat Advanced Cluster Security for Kubernetes (Red Hat Advanced Cluster Security or ACS for short) provides the tools and capabilities to address the security needs of a cloud-native development approach on Kubernetes.</p>
</div>
<div class="paragraph">
<p>The ACS solution offers visibility into the security of your cluster, vulnerability management, and security compliance through auditing, network segmentation awareness and configuration, security risk profiling, security-related configuration management, threat detection, and incident response. In addition, ACS grants an ability to pull the actions from that tooling deep into the application code development process through APIs.</p>
</div>
<div class="paragraph">
<p>These security features represent any developer or administrator&#8217;s primary work as they work across various environments, including multiple datacenters, private clouds, or public clouds that run Kubernetes clusters.</p>
</div>
<div class="sect2">
<h3 id="_acs_features"><a class="anchor" href="#_acs_features"></a>ACS Features</h3>
<div class="paragraph">
<p>Using Red Hat Advanced Cluster Security for Kubernetes, you can gain comprehensive Kubernetes security that includes the following use cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Visibility: See your entire landscape of images, registries, containers, deployments, and runtime behavior.</p>
</li>
<li>
<p>Vulnerability Management: Identify and remediate vulnerabilities in container images and Kubernetes across the entire software development life cycle.</p>
</li>
<li>
<p>Compliance: Audit your systems against CIS Benchmarks, NIST, PCI, and HIPAA, with interactive dashboards and one-click audit reports.</p>
</li>
<li>
<p>Network Segmentation: Visualize existing connections and enforce tighter segmentation using Kubernetes-native controls to reduce your blast radius.</p>
</li>
<li>
<p>Risk Profiling: See all your deployments ranked by risk level, using context from Kubernetes' declarative data, to prioritize remediation.</p>
</li>
<li>
<p>Configuration Management: Apply best practices for Docker and Kubernetes to harden your environment for a more secure and stable application.</p>
</li>
<li>
<p>Threat Detection: Use rules, automated allow lists, and baselining to identify suspicious activity in your running applications accurately.
Incident Response: Take action, from failing builds and blocking deployments to killing pods and thwarting attacks, using Kubernetes for enforcement.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_acs_architecture"><a class="anchor" href="#_acs_architecture"></a>ACS Architecture</h3>
<div class="paragraph">
<p>The ACS Platform installs as a set of pods in your Kubernetes or OpenShift cluster and includes the following components:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-2.png" alt="acs 2">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.openshift.com/acs/architecture/acs-architecture.html#centralized-components_acs-architecture">Central</a>: [Centralized components] Central is the main component of Red Hat Advanced Cluster Security for Kubernetes, and it is installed as a Kubernetes deployment. It handles data persistence, API interactions, and user interface (Portal) access. You can use the same Central instance to secure multiple OpenShift Container Platform or Kubernetes clusters.</p>
</li>
<li>
<p><a href="https://docs.openshift.com/acs/architecture/acs-architecture.html#centralized-components_acs-architecture">Scanner</a>: [Centralized component] Red Hat Advanced Cluster Security for Kubernetes includes an image vulnerability scanning component called Scanner. It analyzes all image layers to check for known vulnerabilities from the Common Vulnerabilities and Exposures (CVEs) list. The Scanner also identifies vulnerabilities in package managers' packages and dependencies for multiple programming languages.</p>
</li>
<li>
<p><a href="https://docs.openshift.com/acs/architecture/acs-architecture.html#per-cluster-components_acs-architecture">Sensor</a>: [1 x Per Cluster] Red Hat Advanced Cluster Security for Kubernetes uses the Sensor component to monitor Kubernetes and OpenShift Container Platform clusters. It handles interactions with the OpenShift Container Platform or Kubernetes API server for policy detection and enforcement, and it coordinates with Collector.</p>
</li>
<li>
<p><a href="https://docs.openshift.com/acs/architecture/acs-architecture.html#per-cluster-components_acs-architecture">Admission controller</a>: [1 x Cluster] The admission controller prevents users from creating workloads that violate security policies in Red Hat Advanced Cluster Security for Kubernetes. [1 x Admission Controller]</p>
</li>
<li>
<p><a href="https://redhat-scholars.github.io/acs-workshop/acs-workshop/03-overview-acs.html#acs_architecture">Collector</a>: [1 x Node OCP/K8s Nodes] Collector collects and monitors information about container runtime and network activity. It then sends the collected information to Sensor.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scanner only scans those images not already scanned by other integrated vulnerability scanners. It means that if you have integrated Red Hat Advanced Cluster Security for Kubernetes with other vulnerability scanners, Scanner checks and uses the scanning results from the integrated Scanner if available.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_workshop_setup"><a class="anchor" href="#_workshop_setup"></a>Workshop Setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_deploying_demo_application_sources_mandatory"><a class="anchor" href="#_deploying_demo_application_sources_mandatory"></a>Deploying Demo Application Sources - MANDATORY</h3>
<div class="paragraph">
<p>In order to have the applications and vulnerabilities necessary for the demo, we need to introduce a few vulnerable applications into the cluster.</p>
</div>
<div class="paragraph">
<p>The command below will clone the tutorial sources and set the <strong>TUTORIAL_HOME</strong> environment variable to point to the root directory of the tutorial and deploy the applications:</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git clone https://github.com/openshiftdemos/openshift-ops-workshops acs-workshop
export TUTORIAL_HOME="$(pwd)/acs-workshop"
kubectl apply -f $TUTORIAL_HOME/workshop/demo-apps/configuration --recursive
kubectl apply -f $TUTORIAL_HOME/workshop/demo-apps/ --recursive</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NOTE</strong> This command applies a plethora of manifests to your environment. The important part is that the deployments are up and running. The</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run the following command and ensure that the applications are up and running</p></td>
</tr>
</tbody>
</table>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl get deployments -l demo=acs -A</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Output</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAMESPACE      NAME               READY   UP-TO-DATE   AVAILABLE   AGE
backend        api-server         1/1     1            1           0d
frontend       asset-cache        1/1     1            1           0d
log4shell      log4shell-app      3/3     3            3           0d
medical        reporting          1/1     1            1           0d
operations     jump-host          1/1     1            1           0d
payments       visa-processor     1/1     1            1           0d
spring4shell   spring4shell-app   3/3     3            3           0d</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_accessing_the_acs_dashboard"><a class="anchor" href="#_accessing_the_acs_dashboard"></a>Accessing the ACS Dashboard</h3>
<div class="paragraph">
<p>The ACS password will be necessary to access the dashboard. The information to access the ACS dashboard is found on the main access page of the demo.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NOTE</strong> You will get a warning page that the webpage is not private. During setup, ACS can utilize your certification server to avoid these errors.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">It is also best practice to integrate the application with your authentication server.</p></td>
</tr>
</tbody>
</table>
<div class="imageblock unresolved">
<div class="content">
<img src="webpage-warning.png" alt="webpage warning">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_working_in_the_acs_dashboard"><a class="anchor" href="#_working_in_the_acs_dashboard"></a>Working in the ACS Dashboard</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When logging into ACS, you will be redirected to the dashboard&#8217;s main view.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-4.png" alt="acs 4">
</div>
</div>
<div class="paragraph">
<p>This central view will display a high-level view of the information about the Kubernetes clusters. It is essential to understand the primary components to navigate it effectively.</p>
</div>
<div class="paragraph">
<p>In the ACS Dashboard, we have three main sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The header</p>
</li>
<li>
<p>The menu</p>
</li>
<li>
<p>The information</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_dashboard_header"><a class="anchor" href="#_dashboard_header"></a>Dashboard Header</h3>
<div class="imageblock">
<div class="content">
<img src="_images/acs-5.png" alt="acs 5">
</div>
</div>
<div class="paragraph">
<p>The header contains the following (from left to right):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The drop-down menu</p>
</li>
<li>
<p>The search bar</p>
</li>
<li>
<p>The roxctl CLI</p>
</li>
<li>
<p>Light or dark mode</p>
</li>
<li>
<p>Cluster status and problems</p>
</li>
<li>
<p>Help bar</p>
</li>
<li>
<p>User information</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_dashboard_left_menu"><a class="anchor" href="#_dashboard_left_menu"></a>Dashboard Left Menu</h3>
<div class="imageblock">
<div class="content">
<img src="_images/acs-6.png" alt="acs 6">
</div>
</div>
<div class="paragraph">
<p>In the left part of the dashboard, we can see the different sections we can access in ACS to gather information about the security in the clusters we have configured in ACS. Later we will go deeper into a few of them. For the time being, we will introduce each of these:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Dashboard: where we are at this moment. We can get a summary vision of our environment.</p>
</li>
<li>
<p>Network Graph: we can get information about the configured network flows and the real ones. We can use it to create Network Policies to implement network segmentation.</p>
</li>
<li>
<p>Violations: we can get all the events that do not match the defined security policies.</p>
</li>
<li>
<p>Compliance: we can get compliance with our environment according to several industries and regulatory security standards such as PCI DSS.</p>
</li>
<li>
<p>Vulnerability Management: get information about known vulnerabilities affecting your environment. Not only deployed workloads but infrastructure as well.</p>
</li>
<li>
<p>Configuration Management: review configuration to prevent possible misconfigurations which can lead to security issues.</p>
</li>
<li>
<p>Risk: review risks affecting your environment, such as suspicious executions.</p>
</li>
<li>
<p>Platform Configuration: ACS configuration and integrations.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NOTE:</strong> Please explore the application if you have time between the sessions. Some extra containers and apps are deployed in the cluster if you wish to find more vulnerabilities and policy violations.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_dashboard_information"><a class="anchor" href="#_dashboard_information"></a>Dashboard Information</h3>
<div class="paragraph">
<p>The main dashboard gives us a summary of the security state of the whole environment.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-7.png" alt="acs 7">
</div>
</div>
<div class="paragraph">
<p>Including information by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cluster</p>
</li>
<li>
<p>Node</p>
</li>
<li>
<p>Violation</p>
</li>
<li>
<p>Deployments</p>
</li>
<li>
<p>Images</p>
</li>
<li>
<p>Secrets</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/acs-8.png" alt="acs 8">
</div>
</div>
<div class="paragraph">
<p>Each tab at the top can be clicked to see more.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you have extra time, alter and click through the individual dashboard panels. They will take you to other sections of the ACS dashboard with the filters already applied.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vulnerability_management_dashboard"><a class="anchor" href="#_vulnerability_management_dashboard"></a>Vulnerability Management Dashboard</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let us start with Vulnerability Management, a familiar topic for most security teams. Click the <strong>Vulnerability Management</strong> tab, and then select <strong>Dashboard</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/vuln-1.png" alt="vuln 1">
</div>
</div>
<div class="paragraph">
<p>The overview provides several important reports - where the vulnerabilities are, the most widespread or the most recent, where Docker images are coming from, and important vulnerabilities in the cluster itself.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NOTE:</strong> the locations and size of your panels may vary depending on your screen size and zoom. The pictures below will help to highlight the specific panels.</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="_images/vuln-2.png" alt="vuln 2">
</div>
</div>
<div class="paragraph">
<p>More important than fixing any vulnerability is establishing a process to keep container images updated and to prevent the promotion through the pipeline for images with serious, fixable vulnerabilities. ACS displays this through the <strong>Top Risky Deployments by CVE and CVSS Score</strong>. ACS takes the container&#8217;s configuration and vulnerability details to show you the most <strong>at risk</strong> deployments in your cluster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/vuln-3.png" alt="vuln 3">
</div>
</div>
<div class="paragraph">
<p>Above the <strong>Risky Deployment</strong> section, there are buttons to link you to all policies, CVEs, and images, and a menu to bring you to reports by cluster, namespace, deployment, and component. The vulnerability dashboard can be filtered by clicking the <strong>Fixable CVSS</strong> score button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/vuln-4.png" alt="vuln 4">
</div>
</div>
<div class="paragraph">
<p>Locate the <strong>Top Riskiest Images</strong> panel. Here you can see the CVEs associated with containers currently running in the cluster. The goal is to find the log4shell exploit in your cluster and block that container from being pushed in the future.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/vuln-5.png" alt="vuln 5">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Top Riskiest Images</strong> panel, click on the <strong>VIEW ALL</strong> button.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NOTE:</strong> For the following sections, please note that the order in which the images appear or the number of components affected may vary depending on versions and other applications running in the cluster.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_image_overview_and_details"><a class="anchor" href="#_image_overview_and_details"></a>Image Overview and Details</h3>
<div class="paragraph">
<p>Now you will see that the images are listed here in order of risk, based on the number and severity of the vulnerabilities present in the components in the images.</p>
</div>
<div class="paragraph">
<p>Take a look:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images-1.png" alt="images 1">
</div>
</div>
<div class="paragraph">
<p>Notice which images are more exposed. Not only can we see the number of CVEs affecting the images, but which of them are fixable? We can also see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creation date</p>
</li>
<li>
<p>Scan time</p>
</li>
<li>
<p>Image OS</p>
</li>
<li>
<p>Image status</p>
</li>
<li>
<p>How many deployments are using the vulnerable image</p>
</li>
<li>
<p>The total components in the image</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can click and get information about the CVEs and which are fixable.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Top Riskiest Images, <strong>find and click on</strong> the image <strong>visa-processor:latest-v2</strong>. You will review the images' components and violations.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images-2.png" alt="images 2">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Note: If you cannot find the <strong>visa-processor:latest-v2</strong> image, use the search bar to filter for the specific image you want.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you click the search bar, you will be shown the different labels you can search by. Click <strong>Image</strong> and type visa until the correct image comes up.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">You can use this method of searching in all search bars within the ACS dashboard.</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="_images/images-3.png" alt="images 3">
</div>
</div>
<div class="paragraph">
<p>You can move on to the next section only when the dashboard displays the image below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images-4.png" alt="images 4">
</div>
</div>
<div class="sect3">
<h4 id="_acs_vulnerability_scanner"><a class="anchor" href="#_acs_vulnerability_scanner"></a>ACS Vulnerability Scanner</h4>
<div class="paragraph">
<p>ACS' built-in vulnerability scanner breaks down images into layers and components - where components can be operating-system installed packages or dependencies installed by programming languages like Python, Javascript, or Java. The <strong>Image Summary</strong> provides the essential security details of the image overall, with links to the components. Below you can see why the image is ranked as a critically vulnerable application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the DETAILS &amp; METADATA → Image OS panel, the information you see there tells you that this image has a severe security problem - the base image was imported several years ago (Debian 8 - 2015).</p>
</li>
<li>
<p>At the top of the page is the warning that CVE data is stale - that this image has a base OS version whose distribution has stopped providing security information and likely stopped publishing security fixes.</p>
</li>
<li>
<p>Scroll down the page. In the <strong>Image Findings</strong> section, you find the details of the image vulnerabilities. There are 329 fixable vulnerabilities in the cluster (at the time of the creation of this workshop.)</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/risk-5.png" alt="risk 5">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Above the <strong>Image Findings</strong> section, click on the <strong>Dockerfile</strong> tab:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/risk-6.png" alt="risk 6">
</div>
</div>
<div class="paragraph">
<p>The Dockerfile tab view shows the layer-by-layer view, and, as you can see, the most recent layers are also several years old. Time is not kind to images and components - as vulnerabilities are discovered, ACS will display newly discovered CVEs.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">It is not practical to ask your teams to fix Linux or Javascript - but we think it is reasonable to ask them to pick up fixes published by those communities.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_log4shell_cve_vulnerability_analysis"><a class="anchor" href="#_log4shell_cve_vulnerability_analysis"></a>log4shell CVE Vulnerability Analysis</h3>
<div class="paragraph">
<p>It is time to find the components that have the log4shell vulnerability in your cluster.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Head back to the <strong>Top Riskiest Images</strong> Dashboard</p>
</li>
<li>
<p>Search for the log4shell vulnerability using its CVE number (CVE-2021-44228)</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/risk-7.png" alt="risk 7">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>How many images are affected by the vulnerability?</p>
</li>
<li>
<p>How many deployments contain the vulnerability?</p>
</li>
<li>
<p>Why do you think the risk priority is where it is?</p>
</li>
<li>
<p>Should the risk priority be higher? Or lower?</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The log4shell CVE is very serious - scoring 10/10 - and is fixable.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Luckily there is only <strong>ONE</strong> image being affected by this vulnerability, so you could go directly to the source and fix all three deployments in one opportunity.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_relating_image_cves_with_kubernetes_configuration_properties"><a class="anchor" href="#_relating_image_cves_with_kubernetes_configuration_properties"></a>Relating Image CVEs with Kubernetes Configuration Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All of this CVE detail is well and good, but it is a bit noisy. How do we judge the genuine risk - which vulnerabilities are likely to be exploited? Which vulnerabilities do we have to fix first?</p>
</div>
<div class="paragraph">
<p>ACS can use other sources of information in OpenShift to judge the risk that a given vulnerability would be exploited and set priorities for fixes.</p>
</div>
<div class="paragraph">
<p>The first risk factor - is the vulnerable component in a running deployment.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click on the <strong>Risk</strong> panel to continue.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/risk-1.png" alt="risk 1">
</div>
</div>
<div class="paragraph">
<p>Take a look at the total amount of deployments in the cluster. If you remember, the log4shell image was approximately 10 in terms of risks based on CVSS score and other CVEs.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/risk-2.png" alt="risk 2">
</div>
</div>
<div class="paragraph">
<p>So why is it down to #15 in this example?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click on the log4shell deployment and review the risk indicators.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/risk-3.png" alt="risk 3">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Next, click on the <strong>visa-processor</strong> deployment and review its risk indicators.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/risk-4.png" alt="risk 4">
</div>
</div>
<div class="paragraph">
<p>What do you think made the <strong>visa-processor</strong> deployment #1 in this example?</p>
</div>
<div class="paragraph">
<p>Factors that play into the overall score are in the risk indicators section. These include, but are not limited to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Policy Violations</p>
</li>
<li>
<p>Image Vulnerabilities</p>
</li>
<li>
<p>Service Configuration</p>
</li>
<li>
<p>Service Reachability</p>
</li>
<li>
<p>Components Useful for Attackers</p>
</li>
<li>
<p>Number of Components in an Image</p>
</li>
<li>
<p>Image Freshness</p>
</li>
<li>
<p>RBAC Configuration</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A primary reason for the <strong>visa-processor</strong> deployment to be ranked so high is that it is an ancient image (older than the log4shell app). A good indicator of risk is that the older an image is, the more likely it will have a significant exploitable vulnerability.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">We will leave it to you to make risk assessments in the future. Let us get to enforcing a log4shell policy and stopping future deployments containing the vulnerability.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acs_policies"><a class="anchor" href="#_acs_policies"></a>ACS Policies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ACS has many built-in policies to detect activity related to attacker goals: gain a foothold, maintain a presence, move laterally, and exfiltrate data. The continuous runtime monitoring observes all container activity and will automatically respond to events with appropriate enforcement and notification. However, that would be missing out on an opportunity - ACS wants to go one step further, to take advantage of containers' ephemeral, immutable nature to improve security in a measurable way from now on.</p>
</div>
<div class="paragraph">
<p>We want to use runtime incidents and vulnerabilities as a learning opportunity to improve security going forward by constraining how our containers can act.</p>
</div>
<div class="paragraph">
<p>We achieve this by creating policies and implementing them early in the CI/CD process.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On the left-hand side of the application, click the <strong>Platform Configuration</strong> tab and <strong>select</strong> <strong>Policy Management</strong>.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/policy-1.png" alt="policy 1">
</div>
</div>
<div class="paragraph">
<p>You can create policies based on rules and risks as well. Filter through the policies and find the <strong>log4shell</strong> policy.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/policy-2.png" alt="policy 2">
</div>
</div>
<div class="paragraph">
<p>Once you have found the vulnerability, <strong>click</strong> on it to learn more.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/policy-3.png" alt="policy 3">
</div>
</div>
<div class="paragraph">
<p>If you click the actions button, you will see how easy it is to edit, clone, export or disable these policies. We also recommended cloning the policies and adding or removing specific filters as you need them.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_homework"><a class="anchor" href="#_homework"></a>Homework</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have time, try cloning the log4shell policy and altering it to target a vulnerability of your choice. Go to the violations page and see if vulnerable applications have triggered your new policy.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="acm-multicluster.html" class="query-params-link">Advanced Cluster Admin</a></span>
  <span class="next"><a href="acs-devsecops.html" class="query-params-link">DevSecOps</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
